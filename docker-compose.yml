version: '3'

services:
        portainer:
                image: portainer/portainer
                command: -H unix:///var/run/docker.sock
                volumes:
                        - /var/run/docker.sock:/var/run/docker.sock
                        - portainer_data:/data
                labels:
                        - "traefik.frontend.rule=Host:port.srv.tmpry.com"
        traefik:
                image: traefik
                command: --api --docker # Enables the web UI and tells Traefik to listen to docker
                ports:
                        - "80:80"     # The HTTP port, not the web UI port
                volumes:
                        - /var/run/docker.sock:/var/run/docker.sock # So that Traefik can listen to the Docker events
                labels:
                        - "traefik.frontend.rule=Host:traefik.srv.tmpry.com"
                        - "traefik.port=8080"
        whoami:
                image: emilevauge/whoami
                labels:
                        - "traefik.frontend.rule=Host:whoami.srv.tmpry.com"
        echo:
                image: paddycarey/go-echo
                labels:
                        - "traefik.frontend.rule=Host:echo.srv.tmpry.com"
        transfersh:
                image: dutchcoders/transfer.sh:latest
                command: --provider local --basedir /tmp/
                labels:
                        - "traefik.frontend.rule=Host:transfer.srv.tmpry.com"
                        - "traefik.port=8080"
        requestbin:
                image: agaveapi/requestbin:master
                labels:
                        - "traefik.frontend.rule=Host:req.srv.tmpry.com"
                        - "traefik.port=5000"
volumes:
        portainer_data:
